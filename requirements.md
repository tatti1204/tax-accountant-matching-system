# 税理士マッチングサービス要件定義書

## 1. ビジネス要件

### ターゲット市場
- 市場規模：個人事業主約200万人、中小企業約380万社
- 年間成長率：個人事業主は年5%増（副業解禁の影響）
- 初期ターゲット：年商1000万〜1億円の事業者（約50万社）

### 収益モデル
1. **成功報酬型（メイン）**
   - マッチング成立時：初年度顧問料の20%
   - 継続ボーナス：2年目以降は5%/年

2. **税理士側課金**
   - 基本プラン：月額5,000円（掲載のみ）
   - プレミアム：月額20,000円（優先表示、分析機能）

### 競合分析
- 税理士ドットコム：老舗だが検索が使いにくい
- 税理士紹介センター：電話対応で効率が悪い
- **差別化**：AI診断による即時マッチング、料金透明化

### 成功指標
- 1年目：月間マッチング100件
- 3年目：月間1,000件、黒字化
- 税理士登録数：1年で1,000名

## 2. ユーザー要件

### ペルソナ定義

**ペルソナ1：田中さん（35歳・ECサイト運営）**
- 年商3,000万円、従業員3名
- 課題：確定申告が複雑、節税したい
- ニーズ：EC特化の税理士、月1回の定期相談

**ペルソナ2：鈴木さん（28歳・フリーランスエンジニア）**
- 年収800万円、初めての確定申告
- 課題：何から始めれば良いか分からない
- ニーズ：IT系に詳しい、チャット対応可

**ペルソナ3：山田社長（50歳・製造業）**
- 年商8,000万円、従業員15名
- 課題：顧問税理士の高齢化、デジタル化したい
- ニーズ：クラウド会計対応、事業承継の知識

### ユーザージャーニー
1. 認知：Google検索「税理士 探し方」
2. 興味：AI診断を試してみる（3分で完了）
3. 比較：提案された税理士を比較検討
4. 行動：気になる税理士にメッセージ
5. 契約：初回相談後、正式契約

### KPI
- 診断完了率：80%以上
- マッチング率：診断完了者の30%
- 継続率：1年後も80%が同じ税理士

## 3. 機能要件

### MVP必須機能（Must Have）

1. **AI診断マッチング**
   - 5-7問の簡易診断
   - スコアリングアルゴリズム
   - おすすめ税理士3-5名表示

2. **税理士プロフィール**
   - 基本情報（資格、経験年数）
   - 得意分野タグ
   - 料金体系の明示

3. **メッセージ機能**
   - 税理士への相談申込
   - チャット形式のやり取り
   - ファイル添付機能

4. **ユーザー管理**
   - 会員登録（メール/Google）
   - プロフィール管理
   - 相談履歴

### 優先度高（Should Have）
- 料金シミュレーター
- レビュー・評価機能
- 一括見積もり
- 初回相談予約システム

### 将来実装（Could Have）
- ビデオ相談機能
- 契約書作成支援
- 請求書連携
- 会計ソフト連携

### 非機能要件
- レスポンス：3秒以内
- 同時接続：1,000ユーザー
- 稼働率：99.5%
- SSL/個人情報保護

## 4. システム要件

### 技術スタック

**フロントエンド**
- Next.js 14（App Router）
- TypeScript
- Tailwind CSS
- Shadcn/ui
- React Hook Form

**バックエンド**
- Node.js + Express
- TypeScript
- Prisma ORM
- JWT認証

**データベース**
- PostgreSQL（メイン）
- Redis（キャッシュ）

**インフラ**
- Vercel（フロント）
- AWS EC2/ECS（API）
- AWS RDS（DB）
- AWS S3（ファイル）
- CloudFront（CDN）

### データモデル（主要テーブル）
- users（ユーザー情報）
- tax_accountants（税理士情報）
- specialties（専門分野）
- consultations（相談記録）
- messages（メッセージ）
- reviews（レビュー）
- pricing_plans（料金プラン）

### 開発環境
- Docker Compose
- GitHub Actions（CI/CD）
- ESLint + Prettier
- Jest（テスト）